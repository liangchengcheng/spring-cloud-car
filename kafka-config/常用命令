å…³é—­ ./zkServer.sh stop /usr/local/etc/zookeeper/zoo.cfg

å¯åŠ¨ bin/kafka-server-start.sh config/server.properties &

/**åœ¨kafkaä¸­åˆ›å»ºä¸€ä¸ªåä¸º flumetestçš„topic*/

bin/kafka-console-consumer.sh --zookeeper  mpc5:2181,mpc6:2181,mpc7  --from-beginning --topic flumetest


/**kafkaä¸­åœ¨æŽ§åˆ¶å°ä¸Šæ¶ˆè´¹æ¶ˆæ¯é˜Ÿåˆ—çš„å¯åŠ¨æ–¹å¼*/
bin/kafka-console-consumer.sh --zookeeper  mpc5:2181,mpc6:2181,mpc7  --from-beginning --topic flumetest



ä¸‹é¢çš„å¾ˆå¥½ä½¿ðŸ‘‡http://orchome.com/6  ï¼ˆgoodï¼‰

kafkaçš„èƒŒæ™¯çŸ¥è¯†å·²ç»è®²äº†å¾ˆå¤šäº†ï¼Œè®©æˆ‘ä»¬çŽ°åœ¨å¼€å§‹å®žè·µå§ï¼Œå‡è®¾ä½ çŽ°åœ¨æ²¡æœ‰Kafkaå’ŒZooKeeperçŽ¯å¢ƒã€‚

Step 1: ä¸‹è½½ä»£ç 

ä¸‹è½½0.10.0.0ç‰ˆæœ¬å¹¶ä¸”è§£åŽ‹å®ƒã€‚

> tar -xzf kafka_2.11-0.10.0.0.tgz
> cd kafka_2.11-0.10.0.0
Step 2: å¯åŠ¨æœåŠ¡

è¿è¡Œkafkaéœ€è¦ä½¿ç”¨Zookeeperï¼Œæ‰€ä»¥ä½ éœ€è¦å…ˆå¯åŠ¨Zookeeperï¼Œå¦‚æžœä½ æ²¡æœ‰Zookeeperï¼Œä½ å¯ä»¥ä½¿ç”¨kafkaè‡ªå¸¦æ‰“åŒ…å’Œé…ç½®å¥½çš„Zookeeperã€‚

> bin/zookeeper-server-start.sh config/zookeeper.properties
[2013-04-22 15:01:37,495] INFO Reading configuration from: config/zookeeper.properties (org.apache.zookeeper.server.quorum.QuorumPeerConfig)
...
çŽ°åœ¨å¯åŠ¨kafkaæœåŠ¡

> bin/kafka-server-start.sh config/server.properties &
[2013-04-22 15:01:47,028] INFO Verifying properties (kafka.utils.VerifiableProperties)
[2013-04-22 15:01:47,051] INFO Property socket.send.buffer.bytes is overridden to 1048576 (kafka.utils.VerifiableProperties)
...
Step 3: åˆ›å»ºä¸€ä¸ªä¸»é¢˜(topic)

åˆ›å»ºä¸€ä¸ªåä¸ºâ€œtestâ€çš„Topicï¼Œåªæœ‰ä¸€ä¸ªåˆ†åŒºå’Œä¸€ä¸ªå¤‡ä»½ï¼š

> bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test
åˆ›å»ºå¥½ä¹‹åŽï¼Œå¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹å·²åˆ›å»ºçš„topicä¿¡æ¯ï¼š

> bin/kafka-topics.sh --list --zookeeper localhost:2181
test
æˆ–è€…ï¼Œé™¤äº†æ‰‹å·¥åˆ›å»ºtopicå¤–ï¼Œä½ ä¹Ÿå¯ä»¥é…ç½®ä½ çš„brokerï¼Œå½“å‘å¸ƒä¸€ä¸ªä¸å­˜åœ¨çš„topicæ—¶è‡ªåŠ¨åˆ›å»ºtopicã€‚

Step 4: å‘é€æ¶ˆæ¯

Kafkaæä¾›äº†ä¸€ä¸ªå‘½ä»¤è¡Œçš„å·¥å…·ï¼Œå¯ä»¥ä»Žè¾“å…¥æ–‡ä»¶æˆ–è€…å‘½ä»¤è¡Œä¸­è¯»å–æ¶ˆæ¯å¹¶å‘é€ç»™Kafkaé›†ç¾¤ã€‚æ¯ä¸€è¡Œæ˜¯ä¸€æ¡æ¶ˆæ¯ã€‚
è¿è¡Œproducerï¼ˆç”Ÿäº§è€…ï¼‰,ç„¶åŽåœ¨æŽ§åˆ¶å°è¾“å…¥å‡ æ¡æ¶ˆæ¯åˆ°æœåŠ¡å™¨ã€‚

> bin/kafka-console-producer.sh --broker-list localhost:9092 --topic mytopic
This is a message
This is another message
Step 5: æ¶ˆè´¹æ¶ˆæ¯

Kafkaä¹Ÿæä¾›äº†ä¸€ä¸ªæ¶ˆè´¹æ¶ˆæ¯çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå°†å­˜å‚¨çš„ä¿¡æ¯è¾“å‡ºå‡ºæ¥ã€‚

> bin/kafka-console-consumer.sh --zookeeper localhost:2181 --topic mytopic --from-beginning
This is a message
This is another message
